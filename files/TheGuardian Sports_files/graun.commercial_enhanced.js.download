(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{107:function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var r={id:"SignInGateMainControl",start:"2020-05-20",expiry:"2022-12-01",author:"Mahesh Makani",description:"Show sign in gate to 100% of users on 3rd article view of simple article templates, with higher priority over banners and epic. Control Audience.",audience:.1,audienceOffset:.9,successMeasure:"N/A - User does not see gate, only to compare to variant.",audienceCriteria:"3rd article of the day, lower priority than consent banner, simple articles (not gallery, live etc.), not signed in, not shown after dismiss, not on help, info sections etc. Exclude iOS 9 and guardian-live-australia. Suppresses other banners, and appears over epics",ophanComponentId:"main_control_4",dataLinkNames:"SignInGateMain",idealOutcome:"Increase the number of users signed in whilst running at a reasonable scale",showForSensitive:!1,canRun:function(){return!0},variants:[{id:"main-control-4",test:function(){}}]}},108:function(n,t,e){"use strict";e.d(t,"a",(function(){return r}));var r={id:"SignInGateMainVariant",start:"2020-05-20",expiry:"2022-12-01",author:"Mahesh Makani",description:"Show sign in gate to 100% of users on 3rd article view of simple article templates, with higher priority over banners and epic. Main/Variant Audience.",audience:.9,audienceOffset:0,successMeasure:"Users sign in or create a Guardian account",audienceCriteria:"3rd article of the day, lower priority than consent banner, simple articles (not gallery, live etc.), not signed in, not shown after dismiss, not on help, info sections etc. Exclude iOS 9 and guardian-live-australia. Suppresses other banners, and appears over epics",ophanComponentId:"main_variant_4",dataLinkNames:"SignInGateMain",idealOutcome:"Increase the number of users signed in whilst running at a reasonable scale",showForSensitive:!1,canRun:function(){return!0},variants:[{id:"main-variant-4",test:function(){}}]}},121:function(n,t,e){"use strict";e.d(t,"b",(function(){return d})),e.d(t,"a",(function(){return O})),e.d(t,"c",(function(){return p})),e.d(t,"d",(function(){return l}));var r,i=e(3),o=e(63),c=e(40),a=e(215),u=e(0),s=e(22),f={UK:"GB",US:"US",AU:"AU"},d=function(){var n,t,e,a=u.a.get("page.edition"),s=i.a.local.get("gu.geo.override"),d=Object(o.a)(s)?s:null;return null!==(n=null!==(t=null!==(e=r)&&void 0!==e?e:d)&&void 0!==t?t:Object(c.a)({name:"GU_geo_country",shouldMemoize:!0}))&&void 0!==n?n:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UK";return f[n]}(a)},l=function(n){var t=new Date;i.a.local.set("gu.geo.override",n,t.setDate(t.getDate()+1)),r=n},p=function(){Object(a.a)().then((function(n){r=n})).catch((function(){console.log("Error getting location from libs/getLocale"),Object(s.a)(new Error("Error getting location from libs/getLocale"),{},!1),r=Object(c.a)({name:"GU_geo_country",shouldMemoize:!0})}))},b={GBPCountries:{name:"United Kingdom",currency:"GBP",countries:["GB","FK","GI","GG","IM","JE","SH"],supportInternationalisationId:"uk"},UnitedStates:{name:"United States",currency:"USD",countries:["US"],supportInternationalisationId:"us"},AUDCountries:{name:"Australia",currency:"AUD",countries:["AU","KI","NR","NF","TV"],supportInternationalisationId:"au"},EURCountries:{name:"Europe",currency:"EUR",countries:["AD","AL","AT","BA","BE","BG","BL","CH","CY","CZ","DE","DK","EE","ES","FI","FO","FR","GF","GL","GP","GR","HR","HU","IE","IT","LI","LT","LU","LV","MC","ME","MF","IS","MQ","MT","NL","NO","PF","PL","PM","PT","RE","RO","RS","SE","SI","SJ","SK","SM","TF","TR","WF","YT","VA","AX"],supportInternationalisationId:"eu"},International:{name:"International",currency:"USD",countries:["AE","AF","AG","AI","AM","AO","AQ","AR","AS","AW","AZ","BB","BD","BF","BH","BI","BJ","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CC","CD","CF","CG","CI","CL","CM","CN","CO","CR","CU","CV","CW","CX","DJ","DM","DO","DZ","EC","EG","EH","ER","ET","FJ","FM","GA","GD","GE","GH","GM","GN","GQ","GS","GT","GU","GW","GY","HK","HM","HN","HT","ID","IL","IN","IO","IQ","IR","JM","JO","JP","KE","KG","KH","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LK","LR","LS","LY","MA","MD","MG","MH","MK","ML","MM","MN","MO","MP","MR","MS","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NG","NI","NP","NU","OM","PA","PE","PG","PH","PK","PN","PR","PS","PW","PY","QA","RU","RW","SA","SB","SC","SD","SG","SL","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TG","TH","TJ","TK","TL","TM","TN","TO","TT","TW","TZ","UA","UG","UM","UY","UZ","VC","VE","VG","VI","VN","VU","WS","YE","ZA","ZM","ZW"],supportInternationalisationId:"int"},NZDCountries:{name:"New Zealand",currency:"NZD",countries:["NZ","CK"],supportInternationalisationId:"nz"},Canada:{name:"Canada",currency:"CAD",countries:["CA"],supportInternationalisationId:"ca"}},O=function(n){return b[function(n){var t=Object.keys(b).find((function(t){return b[t].countries.includes(n)}));return null!=t?t:"International"}(n)].supportInternationalisationId}},128:function(n,t,e){"use strict";e.d(t,"c",(function(){return c})),e.d(t,"e",(function(){return a})),e.d(t,"d",(function(){return u})),e.d(t,"a",(function(){return s})),e.d(t,"b",(function(){return f}));var r=e(40),i=1e6,o=function(n){return Object(r.c)({name:"GU_mvt_id",value:String(n),daysToLive:365})},c=function(){var n,t=parseInt(null!==(n=Object(r.a)({name:"GU_mvt_id",shouldMemoize:!0}))&&void 0!==n?n:"NaN",10);return Number.isNaN(t)?null:Math.max(Math.min(t,i),1)},a=function(){Object(r.a)({name:"GU_mvt_id",shouldMemoize:!1})||Object(r.c)({name:"GU_mvt_id",value:String(1)})},u=function(){var n=c();n&&o(n===i?1:n+1)},s=function(){var n=c();n&&o(1===n?i:n-1)},f=function(){return i}},153:function(n,t,e){"use strict";e.d(t,"b",(function(){return L})),e.d(t,"a",(function(){return F})),e.d(t,"c",(function(){return K})),e.d(t,"d",(function(){return k}));var r=e(1),i=e.n(r),o=e(73),c=e(12),a=e.n(c),u={url:window.location.href},s=e(0),f=e(30),d=e(128),l=e(62),p=e(93),b=e(9),O=e.n(b),v=e(52);function g(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function h(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?g(Object(e),!0).forEach((function(t){i()(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var m=function(){return window.location.hash.startsWith("#ab")?window.location.hash.replace("#ab-","").split(",").reduce((function(n,t){var e=t.split("="),r=O()(e,2),o=r[0],c=r[1];return h(h({},n),{},i()({},o,{variant:c}))}),{}):{}};function j(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function y(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?j(Object(e),!0).forEach((function(t){i()(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):j(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var w=function(n){var t,e,r=function(n){return Object(v.c)(n,m())}(n),i=Object(p.c)(n),o=function(n){var t=Object(d.b)()*n.audienceOffset,e=t+Object(d.b)()*n.audience,r=Object(d.c)();return r&&r>t&&r<=e?n.variants[r%n.variants.length]:null}(n),c=null!==(t=null!==(e=null!=r?r:i)&&void 0!==e?e:o)&&void 0!==t?t:null,a=r&&window.location.hash.includes("ignoreCanRun=true");return c&&a||function(n){var t=Object(f.b)(n.expiry),e=s.a.get("page.isSensitive"),r=!!n.showForSensitive,i=Object(v.a)(n.id),o=n.canRun();return function(n){u[n.key]=n.value}({key:n.id,value:{test:n,expired:t,isSensitive:e,shouldShowForSensitive:r,isTestOn:i,canTestBeRun:o}}),(!e||r)&&i&&!t&&o}(n)&&c&&function(n){return!(n.canRun&&!n.canRun())&&n.id!==l.a}(c)?y(y({},n),{},{variantToRun:c}):null},S=e(28),M=e.n(S),P=e(60),I=e(22),C=function(n){M.a.record({abTestRegister:n})},G=function(n,t){var e={variantName:n.id,complete:t};return n.campaignCode&&(e.campaignCodes=[n.campaignCode]),e},R=function(n){return n.variants.every((function(n){return"function"==typeof n.impression}))},E=function(n){return function(t){var e,r=t.variantToRun,o=null!==(e=n?r.success:r.impression)&&void 0!==e?e:P.a;try{o(function(n,t,e){var r=i()({},n.id,G(t,String(e)));return function(){return C(r)}}(t,r,n))}catch(n){Object(I.a)(n,{},!1)}}},T=function(n){return n.forEach(E(!0))},U=function(n){return n.filter(R).forEach(E(!1))},D=function(n){return C(function(n){try{var t={},e=Object.keys(s.a.get("tests",{})).filter((function(n){return!!s.a.get("tests.".concat(n))}));return n.filter(function(n){return function(){return!n.apply(void 0,arguments)}}(R)).forEach((function(n){t[n.id]=G(n.variantToRun,"false")})),e.forEach((function(n){t["ab".concat(n)]=G({id:"inTest",test:function(){}},"false")})),t}catch(n){return Object(I.a)(n,{},!1),{}}}(n))},A=e(95);function N(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function B(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?N(Object(e),!0).forEach((function(t){i()(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):N(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var L=Object(o.a)((function(){return function(n){return n.reduce((function(n,t){var e=w(t);return e?[].concat(a()(n),[e]):n}),[])}(A.a)})),F=function(){return Object(v.b)(L())},K=function(n){return L().some((function(t){return t.id===n.id}))},k=function(){var n=L();n.forEach((function(n){return n.variantToRun.test(n)})),U(n),T(n),D(n);var t=Object(v.d)(B(B({},Object(p.b)()),m()));return Object(p.d)(B(B({},Object(v.b)(n)),t)),Promise.all([]).then((function(n){return n.filter(Boolean)})).then((function(n){n.forEach((function(n){return n.variantToRun.test(n)})),U(n),T(n),D(n),Object(p.d)(B(B({},Object(p.b)()),Object(v.b)(n)))}))}},157:function(n,t){n.exports={markup:'<span class="inline-cross inline-icon"><svg width="18" height="18" viewBox="0 0 18 18"><path d="M7.5 9l-6.5-7 1-1 7 6.5 7-6.5 1 1-6.5 7 6.5 7-1 1-7-6.5-7 6.5-1-1 6.5-7z"/></svg></span>'}},283:function(n,t,e){"use strict";e.d(t,"b",(function(){return c})),e.d(t,"a",(function(){return o}));var r=e(3),i=e(0),o=function(){return parseInt(r.a.local.getRaw("gu.alreadyVisited"),10)||0},c=function(){return i.a.get("page.shouldHideReaderRevenue")||"paid-content"===i.a.get("page.sponsorshipType")}},284:function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return c})),e.d(t,"a",(function(){return i}));var r=e(121),i=function(n){var t=Object(r.b)();if(t){var e=Object(r.a)(t);return n.replace(/(support.theguardian.com)\/(contribute|subscribe)/,(function(n,t,r){return"".concat(t,"/").concat(e.toLowerCase(),"/").concat(r)}))}return n},o=function(){return i("https://support.theguardian.com/contribute")},c=function(){return"".concat(i("https://support.theguardian.com/subscribe"),"/digital")}},29:function(n,t,e){"use strict";e.d(t,"c",(function(){return c})),e.d(t,"e",(function(){return a})),e.d(t,"d",(function(){return u})),e.d(t,"a",(function(){return s})),e.d(t,"b",(function(){return f}));var r,i=e(121),o=function(){return r=r||Object(i.b)()},c=function(){return"GB"===o()},a=function(){return"US"===o()},u=function(){return a()||"CA"===o()},s=function(){return"AU"===o()||"NZ"===o()},f=function(){return!c()&&!u()&&!s()}},305:function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var r=e(153),i=[],o=[],c=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i).some((function(n){return Object(r.c)(n)})),t=void 0!==window.guardian.config.tests&&Object.keys(window.guardian.config.tests).some((function(n){return String(o).includes(n)}));return n||t}},52:function(n,t,e){"use strict";e.d(t,"a",(function(){return p})),e.d(t,"b",(function(){return b})),e.d(t,"d",(function(){return O})),e.d(t,"c",(function(){return v}));var r=e(9),i=e.n(r),o=e(1),c=e.n(o),a=e(262),u=e(259),s=e(0),f=e(62);function d(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function l(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?d(Object(e),!0).forEach((function(t){c()(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var p=function(n){return s.a.get("switches.ab".concat(n),!1)},b=function(n){return n.reduce((function(n,t){var e=t.id,r=t.variantToRun;return l(l({},n),c()({},e,{variant:r.id}))}),{})},O=function(n){var t=Object(a.a)(n).filter((function(n){var t=i()(n,2),e=t[0];return t[1].variant===f.a&&function(n){return"NOT_FOUND"!==s.a.get("switches.ab".concat(n),"NOT_FOUND")}(e)}));return Object(u.a)(t)},v=function(n,t){var e=t[n.id];return e?e.variant===f.a?f.b:n.variants.find((function(n){return n.id===e.variant})):null}},62:function(n,t,e){"use strict";e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return i})),e.d(t,"b",(function(){return o}));var r="gu.ab.participations",i="notintest",o={id:i,test:function(){}}},93:function(n,t,e){"use strict";e.d(t,"b",(function(){return c})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return u})),e.d(t,"d",(function(){return s}));var r=e(3),i=e(62),o=e(52),c=function(){var n;return null!==(n=r.a.local.get(i.c))&&void 0!==n?n:{}},a=function(n){return Object(o.c)(n,c())},u=function(){r.a.local.remove(i.c)},s=function(n){r.a.local.set(i.c,n)}},95:function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));var r=e(107),i=[e(108).a,r.a,{id:"RemoteRrHeaderLinksTest",start:"2021-04-15",expiry:"2021-12-01",author:"Tom Forbes",description:"Use the dotcom-components service for serving the Reader Revenue header links",audience:1,audienceOffset:0,successMeasure:"AV is not worse",audienceCriteria:"all pageviews",dataLinkNames:"RRHeaderLinks",idealOutcome:"AV is not worse",showForSensitive:!0,canRun:function(){return!0},variants:[{id:"control",test:function(){}},{id:"remote",test:function(){}}]}]}}]);
//# sourceMappingURL=graun.commercial~enhanced.js.map